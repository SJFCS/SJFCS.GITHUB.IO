<!DOCTYPE html>
<html lang='zh' ><meta charset="utf-8">
<meta name="viewport" content="width=device-width">


<title>Songjinfeng&#39;s BLOG</title>
<link rel="stylesheet" href="/css/eureka.min.css">
<script defer src="/js/eureka.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js"
   crossorigin></script>

  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js"
     crossorigin></script>

<script defer src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js"
   integrity="sha256-uNYoXefWRqv&#43;PsIF/OflNmwtKM4lStn9yrz2gVl6ymo="  crossorigin></script>






<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
   integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3&#43;Aro6EYUG4&#43;cU&#43;KJWu/X"  media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" 
  integrity="sha384-g7c&#43;Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI&#43;sEnkvrMWph2EDg4"  crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
   integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC&#43;Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"  crossorigin></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ],
    });
  });
</script>


<script defer src="https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js" 
  integrity="sha256-Zmpaaj&#43;GXFsPF5WdPArSrnW3b30dovldeKsW00xBVwE="  crossorigin></script>


<link rel="icon" type="image/png" sizes="32x32" href="/images/icon_hucfa16751ac9c82c06b84c3502c0db793_16378_32x32_fill_box_center_2.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/icon_hucfa16751ac9c82c06b84c3502c0db793_16378_180x180_fill_box_center_2.png">

<meta name="description"
  content="推荐阅读 advance bash scripting guide http://www.linuxplus.org/kb/special-chars.html
man手册 https://linux.die.net/man/1/bash
官方手册 https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html
变量 XXX 在linux的shell里，${name}可以表示变量，也可以表示数组。
name后面加[ ]的，一般是数组， ${name[*]}是数组所有元素(all of the elements) ${name[@]}是数组每一个元素(each of the elements)  其实这两个几乎一样，差别主要在于当加上引号时，&quot;${name[*]}&quot;等于所有数组元素及其分隔符（一般是空格）排成的字符串，而&quot;${name[@]}&quot;仍然表示每一个元素。 ${#name[*]}是数组元素的个数，也可以写成${#name[@]}
${name:-Hello} 是指，如果${name}没有赋值，那么它等于Hello,如果赋值了，就保持原值，不用管这个Hello了。(可为空，语句结束后变量销毁)
自定义变量 将命令结果赋值给变量
test=$(ls -l /root/)  变量是由任何字母、数字和下划线组成的字符串，且不能以数字开头 区分字母大小写，例如Var1和var1是不同的 变量、等号、值中间不能出现任何空格
变量位置 执行命令脚本时后可跟变量参数
   - - -     $n n为数字$0代表脚本本身，$1-$9代表1-9个参数，10以上需要用大括号，如$｛10｝    $@ $@命令行所有参数，每个参数都看作独立个体    $* $*命令行所有参数，所有的参数从整体上看作一个整体    $# 参数个数     Shell $*和$@的区别:http://c.biancheng.net/view/807.html
环境变量 https://blog.csdn.net/jiangyanting2011/article/details/78875928
https://www.cnblogs.com/x_wukong/p/4771316.html">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"技术专栏",
      "item":"/posts/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"自动化运维",
      "item":"/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/"},{
      "@type": "ListItem",
      "position": 3 ,
      "name":"",
      "item":"/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/shell/untitled/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/shell/untitled/"
    },
    "headline": "Songjinfeng\u0027s BLOG","wordCount":  607 ,
    "publisher": {
        "@type": "Person",
        "name": "JF. Song",
        "logo": {
            "@type": "ImageObject",
            "url": "/images/icon.png"
        }
        },
    "description": "推荐阅读 advance bash scripting guide http:\/\/www.linuxplus.org\/kb\/special-chars.html\nman手册 https:\/\/linux.die.net\/man\/1\/bash\n官方手册 https:\/\/www.gnu.org\/savannah-checkouts\/gnu\/bash\/manual\/bash.html\n变量 XXX 在linux的shell里，${name}可以表示变量，也可以表示数组。\nname后面加[ ]的，一般是数组， ${name[*]}是数组所有元素(all of the elements) ${name[@]}是数组每一个元素(each of the elements)  其实这两个几乎一样，差别主要在于当加上引号时，\u0026quot;${name[*]}\u0026quot;等于所有数组元素及其分隔符（一般是空格）排成的字符串，而\u0026quot;${name[@]}\u0026quot;仍然表示每一个元素。 ${#name[*]}是数组元素的个数，也可以写成${#name[@]}\n${name:-Hello} 是指，如果${name}没有赋值，那么它等于Hello,如果赋值了，就保持原值，不用管这个Hello了。(可为空，语句结束后变量销毁)\n自定义变量 将命令结果赋值给变量\ntest=$(ls -l \/root\/)  变量是由任何字母、数字和下划线组成的字符串，且不能以数字开头 区分字母大小写，例如Var1和var1是不同的 变量、等号、值中间不能出现任何空格\n变量位置 执行命令脚本时后可跟变量参数\n   - - -     $n n为数字$0代表脚本本身，$1-$9代表1-9个参数，10以上需要用大括号，如$｛10｝    $@ $@命令行所有参数，每个参数都看作独立个体    $* $*命令行所有参数，所有的参数从整体上看作一个整体    $# 参数个数     Shell $*和$@的区别:http:\/\/c.biancheng.net\/view\/807.html\n环境变量 https:\/\/blog.csdn.net\/jiangyanting2011\/article\/details\/78875928\nhttps:\/\/www.cnblogs.com\/x_wukong\/p\/4771316.html"
}
</script><meta property="og:title" content="Songjinfeng&#39;s BLOG" />
<meta property="og:type" content="article" />


<meta property="og:image" content="/images/icon.png">


<meta property="og:url" content="/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/shell/untitled/" />




<meta property="og:description" content="推荐阅读 advance bash scripting guide http://www.linuxplus.org/kb/special-chars.html
man手册 https://linux.die.net/man/1/bash
官方手册 https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html
变量 XXX 在linux的shell里，${name}可以表示变量，也可以表示数组。
name后面加[ ]的，一般是数组， ${name[*]}是数组所有元素(all of the elements) ${name[@]}是数组每一个元素(each of the elements)  其实这两个几乎一样，差别主要在于当加上引号时，&quot;${name[*]}&quot;等于所有数组元素及其分隔符（一般是空格）排成的字符串，而&quot;${name[@]}&quot;仍然表示每一个元素。 ${#name[*]}是数组元素的个数，也可以写成${#name[@]}
${name:-Hello} 是指，如果${name}没有赋值，那么它等于Hello,如果赋值了，就保持原值，不用管这个Hello了。(可为空，语句结束后变量销毁)
自定义变量 将命令结果赋值给变量
test=$(ls -l /root/)  变量是由任何字母、数字和下划线组成的字符串，且不能以数字开头 区分字母大小写，例如Var1和var1是不同的 变量、等号、值中间不能出现任何空格
变量位置 执行命令脚本时后可跟变量参数
   - - -     $n n为数字$0代表脚本本身，$1-$9代表1-9个参数，10以上需要用大括号，如$｛10｝    $@ $@命令行所有参数，每个参数都看作独立个体    $* $*命令行所有参数，所有的参数从整体上看作一个整体    $# 参数个数     Shell $*和$@的区别:http://c.biancheng.net/view/807.html
环境变量 https://blog.csdn.net/jiangyanting2011/article/details/78875928
https://www.cnblogs.com/x_wukong/p/4771316.html" />




<meta property="og:locale" content="zh" />




<meta property="og:site_name" content="Songjinfeng&#39;s BLOG" />









<meta property="article:section" content="posts" />




<body class="flex flex-col min-h-screen">
  <header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
    <div class="w-full max-w-screen-xl mx-auto"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
    <a href="/" class="mr-6 text-primary-text text-xl font-bold">Songjinfeng&#39;s BLOG</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/posts/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  selected-menu-item  mr-4">技术专栏</a>
            <a href="/docs/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">文档笔记</a>
            <a href="/series/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">主题系列</a>
            <a href="/tags/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">标签</a>
            <a href="/authors/songjinfeng/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">关于</a>
            <a href="/index.xml" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">RSS</a>
            <a href="/webstack" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  mr-4">友链&amp;导航</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka" name="Light">浅色</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Dark">深色</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Auto">自动</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            switchMode('Auto')
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }

    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script>
</div>
  </header>
  <main class="flex-grow pt-16">
    <div class="pl-scrollbar">
      <div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">


<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
    <div
        class="col-span-2 lg:col-start-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
        <h1 class="font-bold text-3xl text-primary-text"></h1>
        <div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
    <div class="mr-6 my-2">
        <i class="fas fa-calendar mr-1"></i>
        <span>0001-01-01</span>
    </div>
    <div class="mr-6 my-2">
        <i class="fas fa-clock mr-1"></i>
        <span>3分钟阅读时长</span>
    </div>
    
    
    <div class="mr-6 my-2">
        <i class="fas fa-folder mr-1"></i>
        
        <a href="/categories/blog/" class="hover:text-eureka">blog</a>
        
        
        <span>, </span>
        <a href="/categories/posts/" class="hover:text-eureka">posts</a>
        
        
        <span>, </span>
        <a href="/categories/linux/" class="hover:text-eureka">Linux</a>
        
        
        <span>, </span>
        <a href="/categories/shell/" class="hover:text-eureka">shell</a>
        
    </div>
    

    
</div>
        
        
        

        <div class="content">
            <h1 id="推荐阅读">推荐阅读</h1>
<p>advance bash scripting guide  <a href="http://www.linuxplus.org/kb/special-chars.html">http://www.linuxplus.org/kb/special-chars.html</a></p>
<p>man手册 <a href="https://linux.die.net/man/1/bash">https://linux.die.net/man/1/bash</a></p>
<p>官方手册 <a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html">https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html</a></p>
<h2 id="变量">变量</h2>
<h3 id="xxx">XXX</h3>
<p>在linux的shell里，${name}可以表示变量，也可以表示数组。</p>
<p>name后面加[ ]的，一般是数组，
<code>${name[*]}是数组所有元素(all of the elements)</code>
<code>${name[@]}是数组每一个元素(each of the elements) </code>
其实这两个几乎一样，差别主要在于当加上引号时，<code>&quot;${name[*]}&quot;</code>等于所有数组元素及其分隔符（一般是空格）排成的字符串，而<code>&quot;${name[@]}&quot;</code>仍然表示每一个元素。
<code>${#name[*]}</code>是数组元素的个数，也可以写成<code>${#name[@]}</code></p>
<p><code>${name:-Hello}</code> 是指，如果<code>${name}</code>没有赋值，那么它等于Hello,如果赋值了，就保持原值，不用管这个Hello了。(可为空，语句结束后变量销毁)</p>
<h3 id="自定义变量">自定义变量</h3>
<p>将命令结果赋值给变量</p>
<pre><code>test=$(ls -l  /root/)
</code></pre>
<p>变量是由任何字母、数字和下划线组成的字符串，且不能以数字开头
区分字母大小写，例如Var1和var1是不同的
变量、等号、值中间不能出现任何空格</p>
<h3 id="变量位置">变量位置</h3>
<p>执行命令脚本时后可跟变量参数</p>
<table>
<thead>
<tr>
<th>-</th>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$n</code></td>
<td>n为数字<code>$0</code>代表脚本本身，<code>$1-$9</code>代表1-9个参数，10以上需要用大括号，如<code>$｛10｝</code></td>
<td></td>
</tr>
<tr>
<td><code>$@</code></td>
<td><code>$@</code>命令行所有参数，每个参数都看作独立个体</td>
<td></td>
</tr>
<tr>
<td><code>$*</code></td>
<td><code>$*</code>命令行所有参数，所有的参数从整体上看作一个整体</td>
<td></td>
</tr>
<tr>
<td><code>$#</code></td>
<td>参数个数</td>
<td></td>
</tr>
</tbody>
</table>
<p>Shell <code>$*</code>和<code>$@</code>的区别:http://c.biancheng.net/view/807.html</p>
<h3 id="环境变量">环境变量</h3>
<p><a href="https://blog.csdn.net/jiangyanting2011/article/details/78875928">https://blog.csdn.net/jiangyanting2011/article/details/78875928</a></p>
<p><a href="https://www.cnblogs.com/x_wukong/p/4771316.html">https://www.cnblogs.com/x_wukong/p/4771316.html</a></p>
<p><strong>常用环境变量</strong></p>
<table>
<thead>
<tr>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td>PATH</td>
<td>命令搜索的路径</td>
</tr>
<tr>
<td>HOME</td>
<td>用户家目录</td>
</tr>
<tr>
<td>LOGNAME</td>
<td>用户登陆名</td>
</tr>
<tr>
<td>PWD</td>
<td>当前目录</td>
</tr>
<tr>
<td>HISTFILE</td>
<td>历史命令保存文件</td>
</tr>
<tr>
<td>HISTSIZE</td>
<td>历史命令保存最大行数</td>
</tr>
<tr>
<td>HOSTNAME</td>
<td>主机名</td>
</tr>
<tr>
<td>SHELL</td>
<td>当前shell</td>
</tr>
<tr>
<td>PS1</td>
<td>以及命令提示符</td>
</tr>
<tr>
<td>TMOUT</td>
<td>shell超时登出</td>
</tr>
<tr>
<td>IFS</td>
<td>系统输入分隔符</td>
</tr>
<tr>
<td>OFS</td>
<td>系统输出分隔符</td>
</tr>
</tbody>
</table>
<p>==当使用IFS='\n&rsquo;时，这时其实时把字符n作为了分隔符，\在这里被当作转义符。==
==当使用IFS=$'\n&rsquo;时，这是shell解释执行时才会把换行符作为分隔符。==
==脚本内的变量随脚本运行结束而销毁，包括脚本内定义的export==</p>
<p><strong>环境变量优先级</strong></p>
<p>/etc/enviroment –&gt;/etc/profile –&gt;~/.profile –&gt;/etc/bash.bashrc–&gt; ~/.bashrc</p>
<blockquote>
<p>定义变量时如果不用export，相当于是编程语言中的局部变量，作用域仅在当前脚本中。和变量本身的值没有关系。</p>
<p>你在一个sh里执行另一个sh，如果是export的变量，可以在子sh里用到这个变量</p>
</blockquote>
<ol>
<li>系统级：
（1）/etc/environment: 是系统在登录时读取的第一个文件，用于为所有进程设置环境变量。系统使用此文件时并不是执行此文件中的命令，而是根据KEY=VALUE模式的代码，对KEY赋值以VALUE，因此文件中如果要定义PATH环境变量，只需加入一行形如PATH=$PATH:/xxx/bin的代码即可。
（2）/etc/profile：是系统登录时执行的第二个文件，可以用于设定针对全系统所有用户的环境变量。该文件一般是调用/etc/bash.bashrc文件。
/etc/bash.bashrc：系统级的bashrc文件，为每一个运行bash shell的用户执行此文件。此文件会在用户每次打开shell时执行一次。</li>
</ol>
<blockquote>
<p>注意：　/etc/environment是设置整个系统的环境，而/etc/profile是设置所有用户的环境，前者与登录用户无关，后者与登录用户有关。 这两个文件修改后一般都要重启系统才能生效。</p>
</blockquote>
<ol start="2">
<li>用户级（这些文件处于家目录下）
（1）~/.bash_profile: 是对应当前登录用户的profile文件，用于定制当前用户的个人工作环境。
每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件。这里是推荐放置个人设置的地方
（2）~/.bashrc: 是对应当前登录用户的bash初始化文件，当用户每次打开shell时，系统都会执行此文件一次。平时设置这个文件就可以了。</li>
</ol>
<p>##　退出状态码</p>
<ol>
<li>Linux 提供 <code>$?</code> 来捕获状态码</li>
<li>退出状态码以上一条指令的返回结果为准</li>
<li>0为true 其他数值为false</li>
</ol>
<h3 id="常见状态码">常见状态码</h3>
<p><img src="D:/assets/Untitled/image-20210609095925540.png" alt="image-20210609095925540"></p>
<p><strong>常用判断：</strong></p>
<pre><code>//ps -ef |grep mysql|grep -v grep &amp;&gt; /dev/null
?
if [ $? -eq 0];then
		echo &quot;success...&quot;
else
		echo &quot;failed&quot;
fi
</code></pre>
<h3 id="改变退出状态码">改变退出状态码</h3>
<pre><code>exit $exit_code
例如 exit 48 ; exit 0 
</code></pre>
<h2 id="符号">符号</h2>
<h3 id="逻辑运算符">逻辑运算符</h3>
<p><img src="D:/assets/Untitled/image-20210610110626234.png" alt="image-20210610110626234"></p>
<p><img src="D:/assets/Untitled/image-20210610111713870.png" alt="image-20210610111713870"></p>
<p>==注意：[[ ]] 变量必须加$  [[ ]] 后面必须有空格==</p>
<p>在双方括号中如果使用&gt;和&lt;进行数值比较，会把数字当成字符串来做比较，会首先比较首个数字的ASCII码，然后对比大小，如果首个数字相同，在继续比较后面第二个数字，要用-gt格式</p>
<pre><code>#!/bin/bash
v1=&quot;20&quot;
v2=&quot;9&quot;
v3=&quot;10&quot;
if [ $v1&gt;$v2 ];then
        echo “1”
else
        echo &quot;2&quot;
fi
输出1

#!/bin/bash
v1=&quot;20&quot;
v2=&quot;9&quot;
v3=&quot;10&quot;
if [[ $v1&gt;$v2 ]];then
        echo “1”
else
        echo &quot;2&quot;
fi
输出2
</code></pre>
<h3 id="括号">括号</h3>
<h3 id="后台输送给页面的变量必须加-">**后台输送给页面的变量必须加 **</h3>
<p><code>$!{var}</code> ——中间的感叹号。  说明：如果 <code>var = null</code> 或者不存在，那么 <code>${var}</code> 会直接显示在页面上。</p>
<p><strong>不管任何时候都要使用$!{var}</strong></p>
<p>情况一：${name}</p>
<pre><code>1. ${name}：输出表达式的计算结果，并进行过滤，比如：过滤变量中的html标签 
2. ${var}：如果有值则输出，如果为空，则将该代码原样输出；
</code></pre>
<p>情况二：$!{name}</p>
<ol>
<li>$!{name}：输出表达式的计算结果，不进行过滤，常用来输出html片段</li>
<li>$!(var)：如果有值则输出，如果为空，则不显示，其中的“!”表示如果可以取到值则输出该值，如果取不到值或值为null，则输出空字符串即“”，即强制将不存在的变量显示为空白</li>
</ol>
<p>情况三：!${name}</p>
<ol>
<li>!${name}：其中的“!”就像js中的布尔操作符一样，表示取反</li>
</ol>
<p>**()运算符:
** 为了在子shell中执行一组命令，可以用命令分隔符(即&quot;,&quot;)隔开每一个命令，并把所有的命令用圆括号()括起来。</p>
<p>**{}运算符:
** 如果使用{}来代替()，那么相应的命令将在当前shell中作为一个整体被执行</p>
<p>==括号()中的命令将会新开一个子shell顺序执行，所以括号中的变量不能够被脚本余下的部分使用。==</p>
<p>==<code>(A=3;echo $A;export A=4);echo $A</code>==</p>
<pre><code>$ A=1;echo $A;{ A=2; };echo $A
1
2
$ A=1;echo $A;( A=2; );echo $A
1 
1 
{ A=2; }改变了当前shell变量的值

( A=2; )未改变当前shell变量的值
</code></pre>
<p>()</p>
<p>[]</p>
<p>{}</p>
<p>&amp;&amp;</p>
<p>||</p>
<p>!</p>
<h2 id="语法语句">语法语句</h2>
<h3 id="if-语句">if 语句</h3>
<p>当condition语句为true时执行then后指令，否则进行下一条判断</p>
<p><a href="https://blog.csdn.net/zhan570556752/article/details/80399154">https://blog.csdn.net/zhan570556752/article/details/80399154</a></p>
<pre><code>if [ condition ] &amp;&amp;/||/! [ condition ];then
   符合该条件执行的语句
elif [ condition ];then
   符合该条件执行的语句
...
else
   符合该条件执行的语句
fi

可使用[]或 (),&gt;&lt;判断表达式使用[[]]或(()),=可以用[] ()或将&lt;&gt;转义
</code></pre>
<p>复合条件</p>
<p><img src="D:/assets/Untitled/image-20210610104458193.png" alt="image-20210610104458193"></p>
<h3 id="case-语句">case 语句</h3>
<p>case、in 和 esac 都是 Shell 关键字，$var  表示表达式，pattern 表示匹配模式。</p>
<ul>
<li>expression 既可以是一个变量、一个数字、一个字符串，还可以是一个数学计算表达式，或者是命令的执行结果，只要能够得到 expression 的值就可以。</li>
<li>pattern 可以是一个数字、一个字符串，甚至是一个简单的正则表达式。</li>
</ul>
<p>case 会将 $var 的值与 pattern1、pattern2、pattern3 逐个进行匹配：</p>
<ul>
<li>如果 $var 和某个模式（比如 pattern2）匹配成功，就会执行这模式（比如 pattern2）后面对应的所有语句（该语句可以有一条，也可以有多条），直到遇见双分号<code>;;</code>才停止；然后整个 case 语句就执行完了，程序会跳出整个 case 语句，执行 esac 后面的其它语句。</li>
<li>如果 $var 没有匹配到任何一个模式，那么就执行<code>*)</code>后面的语句（<code>*</code>表示其它所有值），直到遇见双分号<code>;;</code>或者<code>esac</code>才结束。<code>*)</code>相当于多个 if 分支语句中最后的 else 部分。</li>
</ul>
<pre><code>
case $var in
pattern1)
    commands
    ;;
pattern2）
    commands
    ;;
...
*)
    commands
    ;;
esac

</code></pre>
<h3 id="for">for</h3>
<pre><code>for var in list
do
	commands
done
</code></pre>
<h2 id="判断条件">判断条件</h2>
<p>==在shell中，(())双括号代表的是数学运算，可以在里面写数学表达式，但不能用于条件判断，这是语法，记住就行了==
==[[]]里面使用&lt;&gt;作为比较字符串，比较数值用-gt等命令==</p>
<h3 id="需要整数表达式">==<strong>需要整数表达式</strong>==</h3>
<p>eq equal =</p>
<p>ne not equal !=</p>
<p>gt Greater than &gt;</p>
<p>ge Greater equal &gt;=</p>
<p>lt Less than &lt;</p>
<p>le Less equal &lt;=</p>
<p><img src="D:/assets/Untitled/image-20210609111008169.png" alt="image-20210609111008169"></p>
<h3 id="字符串">==<strong>字符串</strong>==</h3>
<p>注意转义<code>\&lt;</code>、<code>\&gt;</code>或双括号(( )) 、[[ ]]</p>
<p><img src="D:/assets/Untitled/image-20210609111130097.png" alt="image-20210609111130097"></p>
<p><img src="D:/assets/Untitled/image-20210609112955877.png" alt="image-20210609112955877"></p>
<p><img src="D:/assets/Untitled/image-20210609113147517.png" alt="image-20210609113147517"></p>
<h3 id="运算符">运算符</h3>
<p>算术运算放在(( ))内，双括号内变量名可不加$，运算符前后可没空格，可用用于if for while，多个运算符可用逗号分割</p>
<p><img src="D:/assets/Untitled/image-20210610105739197.png" alt="image-20210610105739197"></p>
<h2 id="坑">坑</h2>
<h3 id="1-空变量">1. 空变量</h3>
<pre><code class="language-bash"># 应该输出&quot;空&quot;，结果此脚本输出&quot;不为空&quot;，下面我们来找一下原因
#!/bin/bash
# 定义空变量，有无引号都可
v1=&quot;&quot;
判断变量是否为空
if [ -n  $v1 ];then
        echo &quot;不为空&quot;
else
        echo &quot;空&quot;
fi

# sh -x 1.sh 
+ v1=
+ '[' -n ']'
+ echo 不为空
不为空
# 显然脚本将-n 作为了常量 而不是命令
# 解决方法:
1. 将[] 改为(( )) 或 [[ ]]
# (( )):
# sh -x 1.sh 
+ v1=
+ ((  -n    ))
+ echo 空
空
# [[ ]]:
# sh -x 1.sh 
+ v1=
+ [[ -n '' ]]
+ echo 空
空

3. 将[ -n  $v2 ]改为[ -n  &quot;$v2&quot; ]  只能双引号，单引号会将$v2作为常量，而不是变量
# &quot;&quot;
# sh -x 1.sh 
+ v1=
+ '[' -n '' ']'
+ echo 空
空

# ''
# sh -x 1.sh 
+ v1=
+ '[' -n '$v1' ']'
+ echo 不为空
不为空

</code></pre>
<h3 id="2-判断字符数字大小">2. 判断字符数字大小</h3>
<pre><code class="language-bash"># 正确输出&quot;10大于9&quot;，但此脚本输出&quot;10小于9&quot;,下面我们来排查一下
v1=&quot;10&quot;
v2=&quot;9&quot;
if [[ $v1&gt;$v2 ]];then   此处可转义写成 [ $v1 \&gt; $v2 ] 
        echo &quot;10大于9&quot;
else
        echo &quot;10小于9&quot;
fi
# sh -x 1.sh 
+ v1=10
+ v2=9
+ [[ 10 &gt; 9 ]]
+ echo 10小于9
10小于9
# 看似没有什么问题，但在双方括号中如果使用&gt;和&lt;进行数值比较，会把数字当成字符串来做比较，会首先比较首个数字的ASCII码，然后对比大小，如果首个数字相同，在继续比较后面第二个数字。[]内推荐使用-eq -ne -gt这种写法

# 解决方法：
1. -gt 代替&gt; ,此时可用单方括号[]
2. 将[[]],改为(())


</code></pre>
<h3 id="3---z--var---判断空值">3. [ -z ${ var:-} ] 判断空值</h3>
<p><a href="https://stackoverflow.com/questions/38909081/shell-what-is-the-purpose-of-var-when-var-is-unset-or-null">https://stackoverflow.com/questions/38909081/shell-what-is-the-purpose-of-var-when-var-is-unset-or-null</a></p>
<h3 id="4-what-does-var-mean-httpsstackoverflowcomquestions8515411what-is-indirect-expansion-what-does-var-mean">4.<a href="https://stackoverflow.com/questions/8515411/what-is-indirect-expansion-what-does-var-mean"> What does ${!var*} mean? </a></h3>
<h3 id="5-在-bash-中提取文件名和扩展名httpsstackoverflowcomquestions965053extract-filename-and-extension-in-bash">5. <a href="https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash">在 Bash 中提取文件名和扩展名</a></h3>
<h3 id="6-判断变量是否存在--var-_-name--x-httpsunixstackexchangecomquestions501368what-does-the-substitution-var-namex-mean">6.<a href="https://unix.stackexchange.com/questions/501368/what-does-the-substitution-var-namex-mean"> 判断变量是否存在，${ ! var _ name + x }</a></h3>
<h2 id="7-what-is-the-difference-between-var-var-and-var-in-the-bash-shellhttpsstackoverflowcomquestions18135451what-is-the-difference-between-var-var-and-var-in-the-bash-shell">7. <a href="https://stackoverflow.com/questions/18135451/what-is-the-difference-between-var-var-and-var-in-the-bash-shell">What is the difference between ${var}, “$var”, and “${var}” in the Bash shell?</a></h2>
<h2 id="作业">作业</h2>
<p>sh -x 显示执行过程</p>
<p>对于 shell 编程中，使用单引号和双引号时趟过的一些坑有哪些？</p>
<h3 id="关键提炼">关键提炼</h3>
<p>1、处理变量时，单引号和双引号的区别</p>
<p>当变量为空值 需加引号，否则不认为是个变量</p>
<p><img src="D:/assets/Untitled/image-20210609112535765.png" alt="image-20210609112535765"></p>
<p><a href="https://blog.csdn.net/ljlfather/article/details/105200747">https://blog.csdn.net/ljlfather/article/details/105200747</a></p>
<p>2、处理字符串变量时，单引号和双引号的区别
3、单双引号套用时，需注意的一些差异
4、sed 和 awk 中，需注意单双引号的一些差异</p>

        </div>
        
        
        
        
        
        
        
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
    <div>
        
        <span class="block font-bold">上一页</span>
        <a href="/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/shell/ssh%E5%90%8E%E6%89%A7%E8%A1%8C%E5%A4%9A%E6%9D%A1%E5%91%BD%E4%BB%A4/" class="block"></a>
        
    </div>
    <div class="md:text-right mt-4 md:mt-0">
        
        <span class="block font-bold">下一页</span>
        <a href="/posts/7.%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/shell/%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6/" class="block"></a>
        
    </div>
</div>

        
    </div>
    

    
    
</div>
<script>
    document.addEventListener('DOMContentLoaded', ()=>{
        hljs.initHighlightingOnLoad();
    })
</script>

      </div>
    </div>
    
  </main>
  <footer class="pl-scrollbar">
    <div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2021 <a href="https://www.songjinfeng.com/">SonJinfeng</a> 
 &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
  </footer>
</body>

</html>